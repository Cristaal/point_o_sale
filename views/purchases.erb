<h1>Get Ready to Buy Some Crap!</h1>


<h2>Select what you want to buy</h2>

<% if @products.any?() %>
  <form action="/purchase/<%= @purchase.id %>" method="post">
    <input type="hidden" name="_method" value="patch">

    <% @products.each() do |product| %>
    <div class="checkbox">
      <label>
        <input type="checkbox" name="product_ids[]" value="<%= product.id() %>"><%= product.name() %> $<%= product.price() %>
      </label>
    </div>
  <% end %>

  <button type="submit">Add products</button>
</form>
<% end %>

<% if @purchase.products().any?() %>
  <h3>Here are all your products</h3>

  <ul>
    <% @purchase.products().each() do |product| %>
    <li><%= product.name() %> <%= product.price() %></li>
    <% end %>
    <p>Your Total is: $<%= @purchase.products().sum(:price) %> </p>
  </ul>
  <% else %>
    <p>There are no products yet!</p>
  <% end %>

  <a href="/">Get out while you still can!</a>
